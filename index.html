<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Crispy Chicken Beast Dashboard 2025</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
:root{--bg:#0c111b;--card:#141b2d;--accent:#ff9500;--muted:#a0a9c0;--text:#edf2f7;--glass:rgba(255,255,255,0.04)}
body{margin:0;padding:24px;font-family:Inter,sans-serif;background:var(--bg);color:var(--text)}
.wrap{max-width:1300px;margin:0 auto}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
h1{font-size:22px;margin:0}
.controls{display:flex;gap:10px;align-items:center}
select,input,table,input[type=number]{background:var(--glass);border:1px solid rgba(255,255,255,0.08);color:var(--text);padding:6px;border-radius:6px}
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
.card{background:var(--card);border-radius:12px;padding:16px;box-shadow:0 8px 20px rgba(0,0,0,0.3)}
.kpi{grid-column:span 3;display:flex;flex-direction:column;gap:6px}
.kpi .value{font-size:22px;font-weight:700;color:var(--accent)}
.big{grid-column:span 8}
.side{grid-column:span 4}
canvas{width:100%!important;height:350px!important}
table{width:100%;border-collapse:collapse;font-size:14px;color:var(--text)}
th,td{padding:8px;border-bottom:1px solid rgba(255,255,255,0.05)}
th{position:sticky;top:0;background:var(--card)}
.btn{background:var(--accent);border:none;color:#071027;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600;transition:0.2s}
.btn:hover{opacity:0.85}
footer{margin-top:16px;color:var(--muted);font-size:13px}
@media(max-width:1000px){.kpi{grid-column:span 12}.big{grid-column:span 12}.side{grid-column:span 12}}
</style>
</head>
<body>
<div class="wrap" id="dashboardWrap">
<header>
<h1>üêî Crispy Chicken Beast Dashboard</h1>
<div class="controls">
<label class="muted">View:</label>
<select id="viewSelect"><option value="monthly">Monthly</option><option value="channels">Channels</option><option value="branches">Branches</option></select>
<button class="btn" id="downloadBtn">üì∑ Download Chart</button>
<button class="btn" id="pdfBtn">üìÑ Export PDF</button>
<button class="btn" id="excelBtn">üóÑ Export CSV</button>
</div>
</header>
<section class="grid" style="margin-bottom:12px">
<div class="card" style="grid-column:span 12">
<h3>Source Data</h3>
<div style="overflow:auto">
<table id="sourceTable"><thead><tr><th>Month</th><th>2024</th><th>2025</th></tr></thead><tbody></tbody></table>
<div style="margin-top:8px;display:flex;gap:8px">
<button class="btn" id="addRowBtn">‚ûï Add Row</button>
<button class="btn" id="applySourceBtn">Apply Data</button>
<button class="btn" id="resetSourceBtn">Reset</button>
</div>
</div>
</div>
<div class="card kpi"><div class="muted">Total 2024</div><div class="value" id="total2024">AED 36,077,119</div></div>
<div class="card kpi"><div class="muted">Total 2025</div><div class="value" id="total2025">AED 44,232,732</div></div>
<div class="card big"><canvas id="mainChart"></canvas></div>
<div class="card side">
<h3>Filters</h3>
<div style="display:flex;flex-direction:column;gap:8px">
<label class="muted">Channel</label>
<select id="channelFilter"><option value="all">All Channels</option><option value="Dining Takeaway">Dining Takeaway</option><option value="Self Delivery">Self Delivery</option><option value="Online Web">Online Web</option><option value="NOON">NOON</option><option value="Careem">Careem</option><option value="Smile">Smile</option><option value="Talabat">Talabat</option><option value="Deliveroo">Deliveroo</option><option value="Talabana">Talabana</option><option value="Keeta">Keeta</option></select>
<label class="muted">Branch</label>
<select id="branchFilter"><option value="all">All Branches</option><option value="Hamdan St">Hamdan St</option><option value="Khalidiyah">Khalidiyah</option><option value="Shabiya 11">Shabiya 11</option><option value="Muroor">Muroor</option><option value="Al Barsha">Al Barsha</option><option value="Al Satwa">Al Satwa</option><option value="Electra">Electra</option><option value="Al Rigga">Al Rigga</option></select>
<button class="btn" id="resetBtn">Reset Filters</button>
</div>
</div>
<div class="card" style="grid-column:span 12">
<h3>Data Summary</h3>
<div style="max-height:220px;overflow:auto">
<table><thead><tr><th>Item</th><th>2024</th><th>2025</th><th>Change %</th></tr></thead><tbody id="dataBody"></tbody></table>
</div>
</div>
<div class="card" style="grid-column:span 12"><h3>Tests & Validation</h3><div id="testResults">Running sanity checks...</div></div>
</section>
<footer>üí° Tip: Update the source table for Nov & Dec, then click "Apply Data" to refresh the dashboard.</footer>
</div>
<script>
function fmt(v){return v.toLocaleString('en-US',{maximumFractionDigits:2})}
function renderChannels(data){
  const ctx=document.getElementById('mainChart').getContext('2d');
  if(window.mainChartInstance)window.mainChartInstance.destroy();
  window.mainChartInstance=new Chart(ctx,{
    type:'bar',
    data:{labels:data.labels,datasets:data.datasets},
    options:{
      responsive:true,
      plugins:{
        legend:{position:'top'},
        tooltip:{callbacks:{label:ctx=>`AED ${fmt(ctx.parsed.y)}`}}
      },
      scales:{
        x:{stacked:true},
        y:{stacked:true,ticks:{callback:v=>v>=1000000?(v/1000000)+'M':(v/1000)+'k'}}
      }
    }
  });
}
</script>
</body>
</html>
